# pf-dm2trade-contracts

## リポジトリの概要
このリポジトリは、DM2Tradeチームが開発したスマートコントラクトを管理しています。

## リポジトリの目的
DM2Tradeのスマートコントラクトを一元管理し、チーム全体での開発とデプロイを効率化することを目的としています。これにより、開発プロセスの透明性を高め、コードの品質とセキュリティを確保し、迅速なデプロイとメンテナンスを可能にします。

## スマートコントラクトの概要

<img width="2187" alt="DM2Trade検討用-監査用" src="https://github.com/user-attachments/assets/dfcfa7ab-020e-48a5-b006-944df0f2056a">

### DM2TradeRewardPool

このコントラクトは、報酬プールの管理を行うためのものです。報酬の登録、送金用スマートコントラクトの設定、引き出し機能を提供します。

#### 主要機能

- **registerEvent**: トークン報酬イベントID、トークンコントラクトのアドレス、および報酬額を指定して報酬トークンを設定し、送金用スマートコントラクトに承認を与えます。
- **setRewardGateway**: 新しい送金用スマートコントラクトのアドレスを設定し、古いアドレスの許可をリセットします。
- **setWithdrawRecipient**: 引き出し先のアドレスを設定します。
- **withdraw**: 指定されたトークンを引き出します。
- **pause**: コントラクトを一時停止します。
- **unpause**: コントラクトの一時停止を解除します。

#### 役割
- **CONTROLLER_ROLE**: コントラクトの管理と設定を行う役割
- **VERIFIER_ROLE**: コントラクトの引き出しや一時停止解除を行う役割


### ERC20RewardGateway

このコントラクトは、ERC20トークンの報酬を安全かつ管理された方法で分配するためのものです。送金バッチ機能をサポートし、クレームIDハッシュを使用して二重支払いを防止します。

#### 主要機能

- **transferReward**: 報酬を指定されたアドレスに送金します。クレームIDハッシュが既に処理済みの場合は、送金をスキップします。
- **batchTransferReward**: 複数の受取人に対して報酬を配布します。送金先アドレス、送金額、クレームIDハッシュの配列を指定して一括送金を実行します。
- **pause**: コントラクトを一時停止します。
- **unpause**: コントラクトの一時停止を解除します。

#### 役割
- **VERIFIER_ROLE**: コントラクトの一時停止と解除を行う役割
- **CONTROLLER_ROLE**: コントラクトの一時停止を行う役割
- **OPERATOR_ROLE**: 報酬の送金を実行する役割

## Notionのプロダクトリンク
